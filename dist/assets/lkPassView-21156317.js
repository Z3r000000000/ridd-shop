import{_ as m,o as i,c,b as s,h as f,l as d,v as l,t as p,i as _,p as v,d as P,e as u}from"./index-e1daf5a8.js";import{_ as h,a as w}from"./hide-password-ece45b91.js";const y={data(){return{newPassword:"",repeatPassword:"",error:"",success:""}},methods:{async updatePassword(){try{if(!this.validatePasswords())return;const e=JSON.parse(localStorage.getItem("user"));(await fetch(`https://ec4cde03eba81a3e.mokky.dev/users/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({pass:this.newPassword})})).ok?(this.success="Пароль успешно изменен!",this.error="",this.newPassword="",this.repeatPassword=""):(this.error="Ошибка при изменении пароля. Попробуйте снова.",this.success="")}catch(e){console.error("Ошибка при обновлении пароля:",e),this.error="Произошла ошибка. Попробуйте снова позже.",this.success=""}},validatePasswords(){return this.newPassword.length<3?(this.error="Пароль должен быть не менее 3 символов.",this.success="",!1):this.newPassword!==this.repeatPassword?(this.error="Новый пароль и повторный пароль должны совпадать.",this.success="",!1):(this.error="",!0)}}},r=e=>(v("data-v-0484374c"),e=e(),P(),e),g={class:"pageContent"},b={class:"section section_noPadT"},k={class:"wrapper"},S=r(()=>s("div",{class:"crumbs"},[s("span",null,[s("span",null,[s("a",{href:"/"},"Главная")]),u(" / "),s("span",null,[s("a",{href:"lk.html"},"Мой аккаунт")]),u(" / "),s("span",null,"Сменить пароль")])],-1)),V=r(()=>s("h1",{class:"h3 section__title"},"Мой аккаунт",-1)),x={class:"account"},I={class:"account__content"},N=r(()=>s("h1",{class:"h4 account__title"},"Сменить пароль",-1)),T={class:"inputs"},C={class:"input input_pass"},B=r(()=>s("div",{class:"input__icon"},[s("img",{src:h,alt:"",class:"show",title:"Показать пароль"}),s("img",{src:w,alt:"",class:"hide",title:"Скрыть пароль"})],-1)),q={class:"input input_pass"},D=r(()=>s("div",{class:"input__icon"},[s("img",{src:h,alt:"",class:"show",title:"Показать пароль"}),s("img",{src:w,alt:"",class:"hide",title:"Скрыть пароль"})],-1)),F={key:0,class:"error"},J={key:1,class:"success"},M=r(()=>s("button",{type:"submit",class:"btn btn_full accountForm__submit"},"Сохранить изменения",-1));function O(e,o,U,j,t,n){return i(),c("main",g,[s("section",b,[s("div",k,[S,V,s("div",x,[s("div",I,[N,s("form",{onSubmit:o[2]||(o[2]=f((...a)=>n.updatePassword&&n.updatePassword(...a),["prevent"])),class:"accountForm"},[s("div",T,[s("div",C,[d(s("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.newPassword=a),type:"password",name:"new-password",placeholder:"Новый пароль",autocomplete:"off",required:""},null,512),[[l,t.newPassword]]),B]),s("div",q,[d(s("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>t.repeatPassword=a),type:"password",name:"repeat-password",placeholder:"Повторите новый пароль",autocomplete:"off",required:""},null,512),[[l,t.repeatPassword]]),D]),t.error?(i(),c("div",F,p(t.error),1)):_("",!0),t.success?(i(),c("div",J,p(t.success),1)):_("",!0),M])],32)])])])])])}const H=m(y,[["render",O],["__scopeId","data-v-0484374c"]]);export{H as default};
